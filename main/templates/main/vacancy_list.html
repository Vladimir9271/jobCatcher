{% load static %}
<!DOCTYPE html>
<html lang="ru" class="page">

<head>
    <meta charset="UTF-8">
    <title>Вакансии</title>
    <link rel="stylesheet" href="{% static 'main/css/main.css' %}">
    <link rel="stylesheet" href="{% static 'main/css/base.css' %}">
</head>

<body class="page__body">
    <div class="line_help">
        <div class="linee"></div>
    </div>
    <main>
        <div class="section">
            <nav class="nav">
                <a href="{% url 'vacancy_list' %}">Вакансии</a>
                <a href="{% url 'about' %}">О нас</a>

                {% if user.is_authenticated %}
                <span>{{ user.username }} ({{ user.get_role_display }})</span>
                {% if user.role == 'employer' %}
                <a href="{% url 'vacancy_create' %}" class="btn">Создать</a>
                {% endif %}
                <a href="{% url 'logout' %}">Выйти</a>
                {% else %}
                <a href="{% url 'login' %}">Войти</a>
                <a href="{% url 'register' %}" class="btn">Регистрация</a>
                {% endif %}
            </nav>
        </div>

        <div class="section list_nav">
            <h1 class="title">Список вакансий</h1>

            <form method="get">
                <select name="job" onchange="this.form.submit()" class="select">
                    <option value="">Все вакансии</option>
                    {% for job in jobs %}
                    <option value="{{ job.slug }}" {% if selected_job == job.slug %}selected{% endif %}>
                        {{ job.name }}
                    </option>
                    {% endfor %}
                </select>
            </form>
        </div>

        <div class="list">
            {% for vacancy in vacancies %}
            <div class="section">
                <div class="card">
                    <a href="{% url 'vacancy_detail' vacancy.slug %}">
                        {{ vacancy.name }}
                    </a>
                    <div>{{ vacancy.job.name }}</div>
                    <div>{{ vacancy.salary }}₽</div>
                </div>
            </div>
            {% empty %}
            <div class="card card--empty">Вакансий нет</div>
            {% endfor %}
        </div>

    </main>

</body>

</html>